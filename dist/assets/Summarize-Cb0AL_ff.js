import{r,j as t}from"./index-D5HwKqlX.js";import{r as w,w as S}from"./index-xJLT0_qq.js";function g(s){const a=s.replace(/\s+/g," ").split(new RegExp("(?<=[\\.!\\?])\\s+")).filter(Boolean);return a.slice(0,Math.min(4,Math.max(2,Math.ceil(a.length*.4)))).map(n=>"• "+n.trim()).join(`
`)}function j(){const[s,a]=r.useState(""),[l,n]=r.useState(""),[d,m]=r.useState(!1),[p,o]=r.useState(null),u=r.useRef(!1);r.useEffect(()=>{let e="";try{e=sessionStorage.getItem("glint:lastText")||""}catch{}!e&&window.__GLINT_LAST_TEXT__&&(e=String(window.__GLINT_LAST_TEXT__)),e&&a(e)},[]),r.useEffect(()=>{function e(c){const i=c.detail;i?.text&&(a(i.text),u.current||(u.current=!0,f(i.text)))}return window.addEventListener("glint-text",e),()=>window.removeEventListener("glint-text",e)},[]);async function f(e){const c=(e??s).trim();if(!c){o("Nothing to summarize.");return}o(null),m(!0),n("");try{if(typeof window.__GLINT_PROCESSOR__=="function"){const i=await window.__GLINT_PROCESSOR__("summarize",c);n((i??"").toString())}else n(g(c))}catch(i){o(i?.message??"Failed to summarize.")}finally{m(!1)}}async function x(){try{a(await w()||"")}catch{try{a(await navigator.clipboard.readText()||"")}catch{o("Clipboard read blocked.")}}}async function h(){try{await S(l)}catch{try{await navigator.clipboard.writeText(l)}catch{}}}return t.jsxs("div",{className:"page",children:[t.jsx("h2",{className:"page-title",children:"Summarize"}),t.jsxs("div",{className:"actions",children:[t.jsx("button",{onClick:x,children:"Paste from Clipboard"}),t.jsx("button",{onClick:()=>f(),disabled:d||!s.trim(),children:d?"Summarizing…":"Summarize"}),t.jsx("button",{onClick:()=>{a(""),n(""),o(null),u.current=!1},children:"Clear"}),t.jsx("button",{onClick:h,disabled:!l,children:"Copy Output"})]}),t.jsxs("div",{className:"panel",children:[t.jsx("label",{className:"page-title",style:{fontSize:13},children:"Input"}),t.jsx("textarea",{rows:10,value:s,onChange:e=>a(e.target.value),placeholder:"Paste or use Ctrl+Shift+S…"})]}),t.jsxs("div",{className:"panel",children:[t.jsx("label",{className:"page-title",style:{fontSize:13},children:"Summary"}),t.jsx("textarea",{rows:10,value:l,readOnly:!0,placeholder:"Your summary will appear here…"})]}),p&&t.jsx("div",{style:{color:"crimson"},children:p})]})}export{j as default};
