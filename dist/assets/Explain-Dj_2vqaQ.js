import{r as l,j as t}from"./index-D5HwKqlX.js";import{r as w,w as _}from"./index-xJLT0_qq.js";function g(s){return["Here’s a simpler take (local fallback):","",...s.replace(/\s+/g," ").split(new RegExp("(?<=[\\.!\\?])\\s+")).filter(Boolean).map(a=>a.trim()).map((a,u)=>`${u+1}. ${a}`)].join(`
`)}function E(){const[s,n]=l.useState(""),[r,a]=l.useState(""),[u,p]=l.useState(!1),[x,o]=l.useState(null),d=l.useRef(!1);l.useEffect(()=>{let e="";try{e=sessionStorage.getItem("glint:lastText")||""}catch{}!e&&window.__GLINT_LAST_TEXT__&&(e=String(window.__GLINT_LAST_TEXT__)),e&&n(e)},[]),l.useEffect(()=>{function e(c){const i=c.detail;i?.text&&(n(i.text),d.current||(d.current=!0,f(i.text)))}return window.addEventListener("glint-text",e),()=>window.removeEventListener("glint-text",e)},[]);async function f(e){const c=(e??s).trim();if(!c){o("Nothing to explain.");return}o(null),p(!0),a("");try{if(typeof window.__GLINT_PROCESSOR__=="function"){const i=await window.__GLINT_PROCESSOR__("explain",c);a((i??"").toString())}else a(g(c))}catch(i){o(i?.message??"Failed to explain.")}finally{p(!1)}}async function h(){try{n(await w()||"")}catch{try{n(await navigator.clipboard.readText()||"")}catch{o("Clipboard read blocked.")}}}async function m(){try{await _(r)}catch{try{await navigator.clipboard.writeText(r)}catch{}}}return t.jsxs("div",{className:"page",children:[t.jsx("h2",{className:"page-title",children:"Explain"}),t.jsxs("div",{className:"actions",children:[t.jsx("button",{onClick:h,children:"Paste from Clipboard"}),t.jsx("button",{onClick:()=>f(),disabled:u||!s.trim(),children:u?"Explaining…":"Explain"}),t.jsx("button",{onClick:()=>{n(""),a(""),o(null),d.current=!1},children:"Clear"}),t.jsx("button",{onClick:m,disabled:!r,children:"Copy Output"})]}),t.jsxs("div",{className:"panel",children:[t.jsx("label",{className:"page-title",style:{fontSize:13},children:"Input"}),t.jsx("textarea",{rows:10,value:s,onChange:e=>n(e.target.value),placeholder:"Paste or use Ctrl+Shift+S…"})]}),t.jsxs("div",{className:"panel",children:[t.jsx("label",{className:"page-title",style:{fontSize:13},children:"Explanation"}),t.jsx("textarea",{rows:10,value:r,readOnly:!0,placeholder:"Your explanation will appear here…"})]}),x&&t.jsx("div",{style:{color:"crimson"},children:x})]})}export{E as default};
